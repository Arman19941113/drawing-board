!function(e){function n(n){for(var o,l,c=n[0],u=n[1],i=n[2],d=0,v=[];d<c.length;d++)l=c[d],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&v.push(r[l][0]),r[l]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);for(s&&s(n);v.length;)v.shift()();return a.push.apply(a,i||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],o=!0,c=1;c<t.length;c++){var u=t[c];0!==r[u]&&(o=!1)}o&&(a.splice(n--,1),e=l(l.s=t[0]))}return e}var o={},r={0:0},a=[];function l(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.m=e,l.c=o,l.d=function(e,n,t){l.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,n){if(1&n&&(e=l(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(l.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)l.d(t,o,function(n){return e[n]}.bind(null,o));return t},l.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(n,"a",n),n},l.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},l.p="/drawing-board/web/";var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=n,c=c.slice();for(var i=0;i<c.length;i++)n(c[i]);var s=u;a.push([21,1]),t()}({19:function(e,n,t){"use strict";t(6)},20:function(e,n,t){"use strict";t(7)},21:function(e,n,t){"use strict";t.r(n);t(14);var o=t(9),r=(t(15),t(5)),a=(t(16),t(10)),l=(t(17),t(11)),c=(t(18),t(4)),u=t(13),i=t(1);var s=t(2),d=t(12);var v=Object(i.F)("data-v-cfaa1b94");Object(i.s)("data-v-cfaa1b94");var f={class:"setting-dropdown"},p={class:"control-item"},h=Object(i.k)("span",null,"线宽：",-1),b={class:"control-item"},m=Object(i.k)("span",null,"颜色：",-1),k={class:"control-item"},O=Object(i.k)("span",null,"撤销：",-1),j={class:"control-item"},y=Object(i.k)("span",null,"清除：",-1),w={class:"control-item"},g=Object(i.k)("span",null,"下载：",-1),C={class:"control-item"},x=Object(i.k)("span",null,"播放：",-1);Object(i.r)();var P=v((function(e,n){var t=Object(i.v)("AButton"),o=Object(i.v)("AInput"),r=Object(i.v)("AColorPicker"),a=Object(i.v)("AIcon"),l=Object(i.v)("APopper");return Object(i.q)(),Object(i.g)(i.c,null,[Object(i.k)(t,{ref:"reference",class:"setting-button","left-icon":"setting",onClick:n[1]||(n[1]=function(n){return e.handleClick(n)})},null,512),Object(i.k)(l,{value:e.showPopper,reference:e.reference},{default:v((function(){return[Object(i.k)("div",f,[Object(i.k)("div",p,[h,Object(i.k)(o,{style:{width:"120px"},type:"number",modelValue:e.lineWidth,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.$emit("update:lineWidth",n)})},null,8,["modelValue"])]),Object(i.k)("div",b,[m,Object(i.k)(r,{style:{width:"120px"},modelValue:e.strokeColor,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.$emit("update:strokeColor",n)})},null,8,["modelValue"])]),Object(i.k)("div",k,[O,Object(i.k)(a,{name:"revoke",class:"ui-icon",onClick:n[4]||(n[4]=function(n){return e.$emit("revoke")})})]),Object(i.k)("div",j,[y,Object(i.k)(a,{name:"clear",class:"ui-icon",onClick:n[5]||(n[5]=function(n){return e.$emit("clear")})})]),Object(i.k)("div",w,[g,Object(i.k)(a,{name:"download",class:"ui-icon",onClick:n[6]||(n[6]=function(n){return e.$emit("download")})})]),Object(i.k)("div",C,[x,Object(i.k)(a,{name:"play",class:"ui-icon",onClick:n[7]||(n[7]=function(n){return e.$emit("play")})})])])]})),_:1},8,["value","reference"])],64)})),T={props:{lineWidth:{type:String,default:"10"},strokeColor:{type:String,default:"rgba(0,0,0,0.6)"}},emits:["update:lineWidth","update:strokeColor","revoke","clear","download","play"],setup:function(){var e=Object(s.h)(null),n=Object(s.h)(!1),t=function(t){e.value.$el.contains(t.target)||(n.value=!1)};return{showPopper:n,reference:e,handleClick:function(){n.value=!n.value,setTimeout((function(){document.addEventListener("click",t,{once:!0})}))}}}};t(19);T.render=P,T.__scopeId="data-v-cfaa1b94";var W={components:{Sidebar:T},setup:function(){var e=Object(s.h)(null),n=function(e){var n=function(){e.value.width=document.documentElement.clientWidth,e.value.height=document.documentElement.clientHeight},t={},o=function(){t.clearRect(0,0,e.value.width,e.value.height)};Object(i.o)((function(){t=e.value.getContext("2d"),Object(i.n)((function(){t.lineJoin="round",t.lineCap="round"})),n(),window.onresize=n}));var r=!1,a=Object(s.h)("10"),l=Object(s.h)("rgba(0,0,0,0.6)"),c=[],u=[],v=function(){o(),u.forEach((function(e){e.forEach((function(n,o,r){if(0===o)t.lineWidth=n.width,t.strokeStyle=n.color;else if(1===o)t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(n.x,n.y);else{var a=r[o-1].x,l=r[o-1].y,c=a/2+n.x/2,u=l/2+n.y/2;t.quadraticCurveTo(a,l,c,u)}o===e.length-1&&(t.lineTo(n.x,n.y),t.stroke())}))}))},f=Object(d.a)((function(e){var n=e.clientX,t=e.clientY;m(c,n,t)&&(c.push({x:n,y:t}),v())}),8),p=function n(){r=!1,c=[],e.value.removeEventListener("mousemove",f),e.value.removeEventListener("mouseup",n)},h=Object(d.a)((function(e){e.preventDefault();var n=e.touches[0].clientX,t=e.touches[0].clientY;m(c,n,t)&&(c.push({x:n,y:t}),v())}),8),b=function n(t){t.preventDefault(),r=!1,c=[],e.value.removeEventListener("touchmove",h),e.value.removeEventListener("touchend",n)};return{lineWidth:a,strokeColor:l,handleMousedown:function(n){r=!0;var t=n.clientX,o=n.clientY;c.push({width:a.value,color:l.value}),c.push({x:t,y:o}),u.push(c),v(),e.value.addEventListener("mousemove",f,{passive:!0}),e.value.addEventListener("mouseup",p)},handleTouchstart:function(n){n.preventDefault(),r=!0;var t=n.touches[0].clientX,o=n.touches[0].clientY;c.push({width:a.value,color:l.value}),c.push({x:t,y:o}),u.push(c),v(),e.value.addEventListener("touchmove",h),e.value.addEventListener("touchend",b)},revoke:function(){u.pop(),v()},clear:function(){u.splice(0),o()},downloadPng:function(){var n=document.createElement("a");n.href=e.value.toDataURL("image/png"),window.navigator.userAgent.toLowerCase().match(/iphone|android|ipad/)?n.target="_blank":n.download="图片",n.click()},play:function(){var e=u.reduce((function(e,n){return e.concat(n)})),n=e.length,a=2;requestAnimationFrame((function l(){if(o(),a<=n)for(var c=0;c<a;c++){var u=e[c];if(u.width)t.lineWidth=u.width,t.strokeStyle=u.style;else{if(e[c-1].width)t.beginPath(),t.moveTo(u.x,u.y),t.lineTo(u.x,u.y);else{var i=e[c-1].x,s=e[c-1].y,d=i/2+u.x/2,f=s/2+u.y/2;t.quadraticCurveTo(i,s,d,f)}(c===a-1||e[c+1].width)&&(t.lineTo(u.x,u.y),t.stroke())}}(a+=1)>n||(r?v():requestAnimationFrame(l))}))}};function m(e,n,t){var o=e[e.length-1].x,r=e[e.length-1].y;return Math.abs(n-o)>=8||Math.abs(t-r)>=8}}(e);return{lineWidth:n.lineWidth,strokeColor:n.strokeColor,myCanvasRef:e,handleMousedown:n.handleMousedown,handleTouchstart:n.handleTouchstart,revoke:n.revoke,clear:n.clear,downloadPng:n.downloadPng,play:n.play}}};t(20);W.render=function(e,n){var t=Object(i.v)("Sidebar");return Object(i.q)(),Object(i.g)(i.c,null,[Object(i.k)("canvas",{id:"myCanvas",ref:"myCanvasRef",onMousedown:n[1]||(n[1]=function(n){return e.handleMousedown(n)}),onTouchstart:n[2]||(n[2]=function(n){return e.handleTouchstart(n)})},null,544),Object(i.k)(t,{lineWidth:e.lineWidth,"onUpdate:lineWidth":n[3]||(n[3]=function(n){return e.lineWidth=n}),strokeColor:e.strokeColor,"onUpdate:strokeColor":n[4]||(n[4]=function(n){return e.strokeColor=n}),onRevoke:n[5]||(n[5]=function(n){return e.revoke(n)}),onClear:n[6]||(n[6]=function(n){return e.clear(n)}),onPlay:n[7]||(n[7]=function(n){return e.play(n)}),onDownload:n[8]||(n[8]=function(n){return e.downloadPng(n)})},null,8,["lineWidth","strokeColor"])],64)};var E=W,L=Object(u.b)(E);L.component(c.a.name,c.a),L.component(l.a.name,l.a),L.component(a.a.name,a.a),L.component(r.a.name,r.a),L.component(o.a.name,o.a),L.mount("#app")},6:function(e,n,t){},7:function(e,n,t){}});